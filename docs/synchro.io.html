---

title: synchro.io


keywords: fastai
sidebar: home_sidebar

summary: "IO classes to read files in the different format Asari lab is acquiring from: hdf5, rhd, raw, npy, all adapted from the SpykingCircus project by Pierre Yger and Olivier Marre https://spyking-circus.readthedocs.io/en/latest/"
description: "IO classes to read files in the different format Asari lab is acquiring from: hdf5, rhd, raw, npy, all adapted from the SpykingCircus project by Pierre Yger and Olivier Marre https://spyking-circus.readthedocs.io/en/latest/"
nb_path: "10_synchro.io.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 10_synchro.io.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="atoi" class="doc_header"><code>atoi</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L17" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>atoi</code>(<strong><code>text</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="natural_keys" class="doc_header"><code>natural_keys</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L20" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>natural_keys</code>(<strong><code>text</code></strong>)</p>
</blockquote>
<p>alist.sort(key=natural_keys) sorts in human order
<a href="http://nedbatchelder.com/blog/200712/human_sorting.html">http://nedbatchelder.com/blog/200712/human_sorting.html</a>
(See Toothy's implementation in the comments)</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="filter_per_extension" class="doc_header"><code>filter_per_extension</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L28" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>filter_per_extension</code>(<strong><code>files</code></strong>, <strong><code>extension</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="print_and_log" class="doc_header"><code>print_and_log</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L36" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>print_and_log</code>(<strong><code>to_print</code></strong>, <strong><code>level</code></strong>=<em><code>'info'</code></em>, <strong><code>logger</code></strong>=<em><code>None</code></em>, <strong><code>display</code></strong>=<em><code>True</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="print_info" class="doc_header"><code>print_info</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L47" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>print_info</code>(<strong><code>lines</code></strong>)</p>
</blockquote>
<p>Prints informations messages, enhanced graphical aspects.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="print_error" class="doc_header"><code>print_error</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L54" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>print_error</code>(<strong><code>lines</code></strong>)</p>
</blockquote>
<p>Prints errors messages, enhanced graphical aspects.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_offset" class="doc_header"><code>get_offset</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L62" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_offset</code>(<strong><code>data_dtype</code></strong>, <strong><code>dtype_offset</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="DataFile" class="doc_header"><code>class</code> <code>DataFile</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L92" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>DataFile</code>(<strong><code>file_name</code></strong>, <strong><code>params</code></strong>, <strong><code>is_empty</code></strong>=<em><code>False</code></em>, <strong><code>stream_mode</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>A generic class that will represent how the program interacts with the data. Such an abstraction
layer should allow people to write their own wrappers, for several file formats, with or without
parallel write, streams, and so on. Note that depending on the complexity of the datastructure,
this extra layer can slow down the code.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="read_header" class="doc_header"><code>read_header</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L646" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>read_header</code>(<strong><code>fid</code></strong>)</p>
</blockquote>
<p>Reads the Intan File Format header from the given file.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_bytes_per_data_block" class="doc_header"><code>get_bytes_per_data_block</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L765" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_bytes_per_data_block</code>(<strong><code>header</code></strong>)</p>
</blockquote>
<p>Calculates the number of bytes in each 60-sample datablock.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="read_qstring" class="doc_header"><code>read_qstring</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L802" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>read_qstring</code>(<strong><code>fid</code></strong>)</p>
</blockquote>
<p>Read Qt style QString.</p>
<p>The first 32-bit unsigned number indicates the length of the string (in bytes).
If this number equals 0xFFFFFFFF, the string is null.</p>
<p>Strings are stored as unicode.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="RHDFile" class="doc_header"><code>class</code> <code>RHDFile</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L834" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>RHDFile</code>(<strong><code>file_name</code></strong>, <strong><code>params</code></strong>, <strong><code>is_empty</code></strong>=<em><code>False</code></em>, <strong><code>stream_mode</code></strong>=<em><code>None</code></em>) :: <a href="/theonerig/synchro.io.html#DataFile"><code>DataFile</code></a></p>
</blockquote>
<p>A generic class that will represent how the program interacts with the data. Such an abstraction
layer should allow people to write their own wrappers, for several file formats, with or without
parallel write, streams, and so on. Note that depending on the complexity of the datastructure,
this extra layer can slow down the code.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="H5File" class="doc_header"><code>class</code> <code>H5File</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L1110" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>H5File</code>(<strong><code>file_name</code></strong>, <strong><code>params</code></strong>, <strong><code>is_empty</code></strong>=<em><code>False</code></em>, <strong><code>stream_mode</code></strong>=<em><code>None</code></em>) :: <a href="/theonerig/synchro.io.html#DataFile"><code>DataFile</code></a></p>
</blockquote>
<p>A generic class that will represent how the program interacts with the data. Such an abstraction
layer should allow people to write their own wrappers, for several file formats, with or without
parallel write, streams, and so on. Note that depending on the complexity of the datastructure,
this extra layer can slow down the code.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="RawBinaryFile" class="doc_header"><code>class</code> <code>RawBinaryFile</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L1229" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>RawBinaryFile</code>(<strong><code>file_name</code></strong>, <strong><code>params</code></strong>, <strong><code>is_empty</code></strong>=<em><code>False</code></em>, <strong><code>stream_mode</code></strong>=<em><code>None</code></em>) :: <a href="/theonerig/synchro.io.html#DataFile"><code>DataFile</code></a></p>
</blockquote>
<p>A generic class that will represent how the program interacts with the data. Such an abstraction
layer should allow people to write their own wrappers, for several file formats, with or without
parallel write, streams, and so on. Note that depending on the complexity of the datastructure,
this extra layer can slow down the code.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="NumpyFile" class="doc_header"><code>class</code> <code>NumpyFile</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L1300" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>NumpyFile</code>(<strong><code>file_name</code></strong>, <strong><code>params</code></strong>, <strong><code>is_empty</code></strong>=<em><code>False</code></em>, <strong><code>stream_mode</code></strong>=<em><code>None</code></em>) :: <a href="/theonerig/synchro.io.html#RawBinaryFile"><code>RawBinaryFile</code></a></p>
</blockquote>
<p>A generic class that will represent how the program interacts with the data. Such an abstraction
layer should allow people to write their own wrappers, for several file formats, with or without
parallel write, streams, and so on. Note that depending on the complexity of the datastructure,
this extra layer can slow down the code.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_all_data" class="doc_header"><code>load_all_data</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L1373" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_all_data</code>(<strong><code>datafile</code></strong>:<a href="/theonerig/synchro.io.html#DataFile"><code>DataFile</code></a>)</p>
</blockquote>
<p>Read all the data contained by a file. For rhd and hdf5, correspond to the ephy channels. To read the ADC
data, see <a href="/theonerig/synchro.io.html#load_all_data_adc"><code>load_all_data_adc</code></a></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_all_data_adc" class="doc_header"><code>load_all_data_adc</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L1392" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_all_data_adc</code>(<strong><code>datafile</code></strong>:<a href="/theonerig/synchro.io.html#DataFile"><code>DataFile</code></a>, <strong><code>channel_idx</code></strong>=<em><code>0</code></em>)</p>
</blockquote>
<p>Read all the data contained by a file. For rhd and hdf5, correspond to the adc channels. To read the ephy
data, see <a href="/theonerig/synchro.io.html#load_all_data"><code>load_all_data</code></a></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_all_data_dig_in" class="doc_header"><code>load_all_data_dig_in</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L1413" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_all_data_dig_in</code>(<strong><code>datafile</code></strong>:<a href="/theonerig/synchro.io.html#DataFile"><code>DataFile</code></a>, <strong><code>channel_idx</code></strong>=<em><code>0</code></em>)</p>
</blockquote>
<p>Read all the data contained by a file. For rhd and hdf5, correspond to the adc channels. To read the ephy
data, see <a href="/theonerig/synchro.io.html#load_all_data"><code>load_all_data</code></a></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_all_data_both" class="doc_header"><code>load_all_data_both</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L1434" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_all_data_both</code>(<strong><code>datafile</code></strong>:<a href="/theonerig/synchro.io.html#DataFile"><code>DataFile</code></a>)</p>
</blockquote>
<p>Read all the data contained by a file. For rhd and hdf5, correspond to the adc channels. To read the ephy
data, see <a href="/theonerig/synchro.io.html#load_all_data"><code>load_all_data</code></a></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="export_adc_raw" class="doc_header"><code>export_adc_raw</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L1457" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>export_adc_raw</code>(<strong><code>datafile</code></strong>:<a href="/theonerig/synchro.io.html#DataFile"><code>DataFile</code></a>, <strong><code>output_fn</code></strong>=<em><code>''</code></em>, <strong><code>channel_idx</code></strong>=<em><code>0</code></em>)</p>
</blockquote>
<p>Exports a datafile adc channel to a single raw binary file. Useful to reduce disk usage after that
spike sorting is done.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="export_dig_in_raw" class="doc_header"><code>export_dig_in_raw</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L1475" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>export_dig_in_raw</code>(<strong><code>datafile</code></strong>:<a href="/theonerig/synchro.io.html#DataFile"><code>DataFile</code></a>, <strong><code>output_fn</code></strong>=<em><code>''</code></em>, <strong><code>channel_idx</code></strong>=<em><code>0</code></em>)</p>
</blockquote>
<p>Exports a datafile adc channel to a single raw binary file. Useful to reduce disk usage after that
spike sorting is done.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="export_raw" class="doc_header"><code>export_raw</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L1493" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>export_raw</code>(<strong><code>datafile</code></strong>:<a href="/theonerig/synchro.io.html#DataFile"><code>DataFile</code></a>, <strong><code>output_fn</code></strong>=<em><code>''</code></em>)</p>
</blockquote>
<p>Exports a datafile adc channel to a single raw binary file. Useful to reduce disk usage after that
spike sorting is done.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="export_both_raw" class="doc_header"><code>export_both_raw</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L1507" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>export_both_raw</code>(<strong><code>datafile</code></strong>:<a href="/theonerig/synchro.io.html#DataFile"><code>DataFile</code></a>)</p>
</blockquote>
<p>Exports a both raw data, adc and ephy.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_adc_raw" class="doc_header"><code>load_adc_raw</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L1530" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_adc_raw</code>(<strong><code>filepath</code></strong>, <strong><code>sampling_rate</code></strong>=<em><code>30000</code></em>)</p>
</blockquote>
<p>Loads adc raw data, in the format exported by <a href="/theonerig/synchro.io.html#export_adc_raw"><code>export_adc_raw</code></a></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_digin_raw" class="doc_header"><code>load_digin_raw</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L1540" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_digin_raw</code>(<strong><code>filepath</code></strong>, <strong><code>sampling_rate</code></strong>=<em><code>30000</code></em>)</p>
</blockquote>
<p>Loads adc raw data, in the format exported by <a href="/theonerig/synchro.io.html#export_adc_raw"><code>export_adc_raw</code></a></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_sync_raw" class="doc_header"><code>load_sync_raw</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/io.py#L1550" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_sync_raw</code>(<strong><code>filepath</code></strong>, <strong><code>sampling_rate</code></strong>=<em><code>10000</code></em>)</p>
</blockquote>
<p>Loads the sync files made by labview for Asari Lab 2P setup</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>
 

